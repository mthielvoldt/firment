{
  "configurations": [
    // pcb1_App
    {
      "name": "pcb1_App",
      "type": "cortex-debug",
      "request": "launch",
      "servertype": "openocd",
      "interface": "swd",
      "device": "STM32L476RG",
      "cwd": "${workspaceFolder}/example/build/pcb1",
      "executable": "app_root.elf",
      "showDevDebugOutput": "raw",
      "configFiles": [
        "interface/stlink.cfg",
        "target/stm32l4x.cfg",
      ]
    },
    // pcb2_App
    {
      "name": "pcb2_App",
      "type": "cortex-debug",
      "request": "launch",
      "servertype": "openocd",
      "interface": "swd",
      "device": "STM32L476RG",
      "cwd": "${workspaceFolder}/example/build/pcb2",
      "executable": "app_root.elf",
      "showDevDebugOutput": "raw",
      "configFiles": [
        "interface/stlink.cfg",
        "target/stm32l4x.cfg",
      ]
    },
    {
      "name": "stmFact-noFlash",
      "type": "cortex-debug",
      "request": "launch",
      "servertype": "openocd",
      "interface": "swd",
      "device": "STM32L476RG",
      "cwd": "${workspaceFolder}/example/build/stm",
      "loadFiles": [],
      "symbolFiles": [
        "mgt-boot/bootloader.elf",
        "app_offset.elf"
      ],
      "showDevDebugOutput": "raw",
      "configFiles": [
        "interface/stlink.cfg",
        "target/stm32l4x.cfg",
      ],
    },
    // {
    //   "name": "stmFactory",
    //   "type": "cortex-debug",
    //   "request": "launch",
    //   "servertype": "openocd",
    //   "interface": "swd",
    //   "device": "STM32L476RG",
    //   "cwd": "${workspaceFolder}/example/build/stm",
    //   "loadFiles": [],
    //   "symbolFiles": [
    //     "mgt-boot/bootloader.elf",
    //     "app_offset.elf"
    //   ],
    //   "showDevDebugOutput": "raw",
    //   "configFiles": [
    //     "interface/stlink.cfg",
    //     "target/stm32l4x.cfg",
    //   ],
    //   "overrideLaunchCommands": [
    //     "monitor flash write_image ./mgt-boot/factory.bin 0x08000000 bin",
    //     "monitor reset", // Reset the target after loading
    //     "continue" // Start execution after reset
    //   ],
    // }
    // pcb0_App
    {
      "name": "pcb0_App",
      "type": "cortex-debug",
      "servertype": "jlink",
      "request": "launch",
      "serverpath": "JLinkGDBServerCLExe",
      "executable": "example/build/xmc/app_root.elf",
      "interface": "swd",
      "device": "XMC4700-2048",
      "preLaunchTask": "cmake build xmc",
      "svdFile": "firmware/port/XMC4/mtb-xmclib-cat3/CMSIS/Infineon/SVD/XMC4700.svd",
      "showDevDebugOutput": "raw",
      // "runToEntryPoint": "main"
    },
    // xmcFact_noFlash
    {
      "name": "xmcFact_noFlash",
      "type": "cortex-debug",
      "servertype": "jlink",
      "request": "launch",
      "serverpath": "JLinkGDBServerCLExe",
      "cwd": "${workspaceFolder}/example/build/xmc",
      "loadFiles": [],
      "symbolFiles": [
        "mgt-boot/bootloader.elf",
        "app_offset.elf"
      ],
      "device": "XMC4700-2048",
      "showDevDebugOutput": "vscode",
    },
    // xmcFactory
    {
      "name": "xmcFactory",
      "type": "cortex-debug",
      "servertype": "jlink",
      "request": "launch",
      "serverpath": "JLinkGDBServerCLExe",
      "cwd": "${workspaceFolder}/example/build/xmc",
      "loadFiles": [],
      "symbolFiles": [
        "mgt-boot/bootloader.elf",
        "app_offset.elf"
      ],
      "device": "XMC4700-2048",
      "showDevDebugOutput": "vscode",
      "preLaunchCommands": [
        "restore mgt-boot/factory.bin binary 0x08000000"
      ],
    },
    // testFirment
    {
      "name": "testFirment",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/test/build/testFirment",
      "args": [],
      "stopAtEntry": false,
      "cwd": "${workspaceFolder}/test",
      "environment": [],
      "externalConsole": false,
      "MIMode": "gdb",
      "setupCommands": [
        {
          "description": "Enable pretty-printing for gdb",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        },
        {
          "description": "Set Disassembly Flavor to Intel",
          "text": "-gdb-set disassembly-flavor intel",
          "ignoreFailures": true
        }
      ],
      "preLaunchTask": "build-tests"
    },
    // esp32s3-contained
    {
      "name": "esp32s3-contained",
      "type": "cppdbg",
      "request": "launch",
      "MIMode": "gdb",
      "program": "build/mqtt5.elf",
      "stopAtEntry": false,
      "cwd": "/project",
      "environment": [],
      "externalConsole": true,
      "preLaunchTask": "esp flash-ocd",
      "targetArchitecture": "arm",
      "sourceFileMap": {
        "/project": "${workspaceFolder}/esp/mqtt5"
      },
      "pipeTransport": {
        "debuggerPath": "xtensa-esp32s3-elf-gdb -x gdbinit build/mqtt5.elf",
        "quoteArgs": false,
        "pipeProgram": "docker",
        "pipeArgs": [
          "run",
          "--rm",
          "-i",
          "--name",
          "idf-2",
          "--volume",
          "${workspaceFolder}/esp/mqtt5:/project",
          "--workdir",
          "/project",
          "-u",
          "1000",
          "-e",
          "HOME=/tmp",
          "--add-host",
          "host.docker.internal:host-gateway",
          "--privileged",
          "espressif/idf:v5.2.1"
        ],
        "pipeCwd": ""
      },
      "setupCommands": [
        {
          "description": "Enable pretty-printing for gdb",
          "text": "-enable-pretty-printing",
          "ignoreFailures": true
        }
      ]
    }
  ],
  "version": "2.0.0"
}